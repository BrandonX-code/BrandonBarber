<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Gasolutions.Maui.App.Pages.FormBarberiaPage"
             BackgroundColor="#0E2A36">

    <ContentPage.Resources>
        <ResourceDictionary>
            <Color x:Key="PrimaryBackground">#0E2A36</Color>
            <Color x:Key="SecondaryBackground">#1E3A49</Color>
            <Color x:Key="TertiaryBackground">#2E4A59</Color>
            <Color x:Key="AccentColor">#FF6F91</Color>
            <Color x:Key="TextPrimary">White</Color>
            <Color x:Key="TextSecondary">#A0A0A0</Color>
            <Color x:Key="CancelButton">#717d7e</Color>

            <Style x:Key="TitleStyle" TargetType="Label">
                <Setter Property="FontSize" Value="24"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
                <Setter Property="HorizontalOptions" Value="Center"/>
            </Style>

            <Style x:Key="SectionTitleStyle" TargetType="Label">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
            </Style>

            <Style x:Key="FieldLabelStyle" TargetType="Label">
                <Setter Property="FontSize" Value="14"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
            </Style>

            <Style x:Key="FormEntryStyle" TargetType="Entry">
                <Setter Property="TextColor" Value="{StaticResource TextPrimary}"/>
                <Setter Property="PlaceholderColor" Value="{StaticResource TextSecondary}"/>
                <Setter Property="BackgroundColor" Value="{StaticResource TertiaryBackground}"/>
                <Setter Property="FontSize" Value="16"/>
            </Style>

            <Style x:Key="RequiredEntryStyle" TargetType="Entry" BasedOn="{StaticResource FormEntryStyle}">
                <Style.Triggers>
                    <DataTrigger TargetType="Entry" Binding="{Binding Text.Length}" Value="0">
                        <Setter Property="BackgroundColor" Value="#3D2A2A"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="SectionFrameStyle" TargetType="Frame">
                <Setter Property="BackgroundColor" Value="{StaticResource SecondaryBackground}"/>
                <Setter Property="CornerRadius" Value="15"/>
                <Setter Property="Padding" Value="20"/>
                <Setter Property="HasShadow" Value="True"/>
            </Style>

            <Style x:Key="PrimaryButtonStyle" TargetType="Button">
                <Setter Property="BackgroundColor" Value="{StaticResource AccentColor}"/>
                <Setter Property="TextColor" Value="{StaticResource Black}"/>
                <Setter Property="CornerRadius" Value="25"/>
                <Setter Property="FontAttributes" Value="Bold"/>
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="HeightRequest" Value="50"/>
            </Style>

            <Style x:Key="SecondaryButtonStyle" TargetType="Button">
                <Setter Property="BackgroundColor" Value="{StaticResource CancelButton}"/>
                <Setter Property="TextColor" Value="Black"/>
                <Setter Property="BorderWidth" Value="1"/>
                <Setter Property="CornerRadius" Value="25"/>
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="HeightRequest" Value="50"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ScrollView Padding="20">
        <StackLayout Spacing="20">
            <Label Text="{Binding PageTitle}" Style="{StaticResource TitleStyle}" Margin="0,0,0,10"/>

            <Frame Style="{StaticResource SectionFrameStyle}">
                <StackLayout Spacing="15">
                    <Label Text="Logo de la Barbería" Style="{StaticResource SectionTitleStyle}"/>
                    <Frame WidthRequest="120" HeightRequest="120" CornerRadius="10" Padding="0" BackgroundColor="{StaticResource TertiaryBackground}" HorizontalOptions="Center">
                        <Image x:Name="LogoImage" Source="{Binding LogoUrl, TargetNullValue='picture.png'}" Aspect="AspectFill"/>
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnSelectLogoTapped"/>
                        </Frame.GestureRecognizers>
                    </Frame>
                    <Button Text="Seleccionar Logo" Style="{StaticResource PrimaryButtonStyle}" Clicked="OnSelectLogoClicked"/>
                </StackLayout>
            </Frame>

            <Frame Style="{StaticResource SectionFrameStyle}">
                <StackLayout Spacing="15">
                    <StackLayout>
                        <Label Text="Nombre de la Barbería *" Style="{StaticResource FieldLabelStyle}"/>
                        <Entry Text="{Binding Nombre}" Placeholder="Ingresa el nombre" Style="{StaticResource RequiredEntryStyle}"/>
                    </StackLayout>
                    <StackLayout>
                        <Label Text="Teléfono *" Style="{StaticResource FieldLabelStyle}"/>
                        <Entry Text="{Binding Telefono}" Placeholder="Ej: +57 300 123 4567" Style="{StaticResource RequiredEntryStyle}" Keyboard="Telephone"/>
                    </StackLayout>
                    <StackLayout>
                        <Label Text="Dirección *" Style="{StaticResource FieldLabelStyle}"/>
                        <Entry Text="{Binding Direccion}" Placeholder="Ingresa la dirección completa" Style="{StaticResource RequiredEntryStyle}"/>
                    </StackLayout>
                    <StackLayout>
                        <Label Text="Email" Style="{StaticResource FieldLabelStyle}"/>
                        <Entry Text="{Binding Email}" Placeholder="contacto@barberia.com" Style="{StaticResource FormEntryStyle}" Keyboard="Email"/>
                    </StackLayout>
                </StackLayout>
            </Frame>

            <StackLayout Spacing="10" Margin="0,10,0,20" Orientation="Horizontal" HorizontalOptions="Center">
                <Button Text="{Binding SaveButtonText}" Style="{StaticResource PrimaryButtonStyle}" Clicked="OnGuardarClicked" IsEnabled="{Binding CanSave}"/>
                <Button Text="Cancelar" Style="{StaticResource SecondaryButtonStyle}" Clicked="OnCancelarClicked"/>
            </StackLayout>

            <Label x:Name="ErrorLabel" TextColor="#ff0000" FontSize="14" HorizontalOptions="Center" IsVisible="False"/>

            <ActivityIndicator IsRunning="{Binding IsBusy}" IsVisible="{Binding IsBusy}" HorizontalOptions="Center" Color="{StaticResource TextPrimary}" Scale="1.5"/>
        </StackLayout>
    </ScrollView>
</ContentPage>